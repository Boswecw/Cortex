# PROJECT CONTEXT: CORTEX

**AI-Powered Local File Intelligence System**  
**Generated by Cortex Export â€¢ December 4, 2025**

---

## ğŸ“‹ Project Overview

| Attribute | Value |
|-----------|-------|
| **Type** | Desktop Application |
| **Stack** | Rust + Tauri + SvelteKit |
| **Database** | SQLite with FTS5 |
| **AI** | OpenAI Embeddings |
| **Design System** | Neural Gold |
| **Status** | ~70% Complete (Phase 3 in progress) |

### Mission
Cortex provides intelligent local file search with dual-mode capabilities:
1. **Keyword Search** â€” Fast FTS5-powered text search
2. **Semantic Search** â€” AI-powered meaning-based discovery

---

## ğŸ—ï¸ Architecture Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CORTEX ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 SVELTEKIT FRONTEND                       â”‚   â”‚
â”‚  â”‚  src/                                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ routes/           â†’ Page routing                   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ lib/components/   â†’ UI components                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ lib/stores/       â†’ State management               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚ IPC                               â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   TAURI BRIDGE                           â”‚   â”‚
â”‚  â”‚  src-tauri/src/commands/ â†’ IPC command handlers         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                   â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   RUST BACKEND                           â”‚   â”‚
â”‚  â”‚  src-tauri/src/                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ db/          â†’ SQLite + FTS5 operations            â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ indexer/     â†’ File scanning & indexing            â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ embeddings/  â†’ OpenAI vector generation            â”‚   â”‚
â”‚  â”‚  â””â”€â”€ search/      â†’ Keyword & semantic search           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                   â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    SQLite DATABASE                       â”‚   â”‚
â”‚  â”‚  â€¢ files table (metadata)                                â”‚   â”‚
â”‚  â”‚  â€¢ files_fts (FTS5 index)                               â”‚   â”‚
â”‚  â”‚  â€¢ embeddings (vector storage)                          â”‚   â”‚
â”‚  â”‚  â€¢ collections (smart collections)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Structure

```
cortex/
â”œâ”€â”€ src/                          # SvelteKit Frontend
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ +layout.svelte        # App layout with sidebar
â”‚   â”‚   â”œâ”€â”€ +page.svelte          # Main search interface
â”‚   â”‚   â”œâ”€â”€ recent/               # Recent files view
â”‚   â”‚   â”œâ”€â”€ starred/              # Starred files view
â”‚   â”‚   â””â”€â”€ collections/          # Smart collections (TODO)
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.svelte          # Navigation + stats
â”‚   â”‚   â”‚   â”œâ”€â”€ ContentArea.svelte      # Search + results
â”‚   â”‚   â”‚   â”œâ”€â”€ SemanticSearch.svelte   # AI search interface
â”‚   â”‚   â”‚   â”œâ”€â”€ PreviewPanel.svelte     # File preview
â”‚   â”‚   â”‚   â”œâ”€â”€ FilterChips.svelte      # Search filters
â”‚   â”‚   â”‚   â”œâ”€â”€ Onboarding.svelte       # First-run wizard
â”‚   â”‚   â”‚   â”œâ”€â”€ CommandPalette.svelte   # (TODO)
â”‚   â”‚   â”‚   â””â”€â”€ ExportPanel.svelte      # (TODO)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts         # Search state
â”‚   â”‚   â”‚   â”œâ”€â”€ files.ts          # File listing state
â”‚   â”‚   â”‚   â””â”€â”€ settings.ts       # User preferences
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ format.ts         # Formatting helpers
â”‚   â”‚       â””â”€â”€ tauri.ts          # IPC wrappers
â”‚   â”‚
â”‚   â””â”€â”€ app.css                   # Neural Gold design system
â”‚
â”œâ”€â”€ src-tauri/                    # Rust Backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs               # Tauri entry point
â”‚   â”‚   â”œâ”€â”€ lib.rs                # Module exports
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ search.rs         # Search commands
â”‚   â”‚   â”‚   â”œâ”€â”€ files.rs          # File operations
â”‚   â”‚   â”‚   â”œâ”€â”€ indexer.rs        # Indexing commands
â”‚   â”‚   â”‚   â””â”€â”€ settings.rs       # Settings commands
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.rs         # Table definitions
â”‚   â”‚   â”‚   â”œâ”€â”€ queries.rs        # SQL queries
â”‚   â”‚   â”‚   â””â”€â”€ migrations.rs     # Schema migrations
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ indexer/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ scanner.rs        # Directory walking
â”‚   â”‚   â”‚   â”œâ”€â”€ extractor.rs      # Text extraction
â”‚   â”‚   â”‚   â””â”€â”€ watcher.rs        # File system events
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ embeddings/
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ openai.rs         # OpenAI API client
â”‚   â”‚   â”‚   â””â”€â”€ chunker.rs        # Text chunking
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ search/
â”‚   â”‚       â”œâ”€â”€ mod.rs
â”‚   â”‚       â”œâ”€â”€ keyword.rs        # FTS5 search
â”‚   â”‚       â””â”€â”€ semantic.rs       # Vector similarity
â”‚   â”‚
â”‚   â”œâ”€â”€ Cargo.toml                # Rust dependencies
â”‚   â””â”€â”€ tauri.conf.json           # Tauri configuration
â”‚
â”œâ”€â”€ static/                       # Static assets
â”œâ”€â”€ package.json                  # Node dependencies
â”œâ”€â”€ svelte.config.js              # SvelteKit config
â””â”€â”€ vite.config.ts                # Vite bundler config
```

---

## ğŸ”§ Key Technologies

### Frontend
| Technology | Version | Purpose |
|------------|---------|---------|
| SvelteKit | 2.x | UI framework & routing |
| TypeScript | 5.x | Type safety |
| Tailwind CSS | 3.x | Utility styling |
| Vite | 5.x | Build tooling |

### Backend  
| Technology | Version | Purpose |
|------------|---------|---------|
| Rust | 1.75+ | Core backend |
| Tauri | 1.5+ | Desktop framework |
| SQLite | 3.x | Local database |
| rusqlite | 0.30+ | SQLite bindings |
| tokio | 1.x | Async runtime |
| reqwest | 0.11+ | HTTP client (OpenAI) |

### AI/ML
| Technology | Purpose |
|------------|---------|
| OpenAI text-embedding-3-small | Vector embeddings |
| SQLite FTS5 | Full-text search |
| Cosine similarity | Semantic matching |

---

## ğŸ¨ Design System: Neural Gold

```css
/* Core palette */
--neural-gold: #D4AF37;
--neural-gold-light: #E8C547;
--neural-gold-dark: #B8962E;
--neural-bg: #1A1A2E;
--neural-surface: #25253A;
--neural-text: #E8E8E8;
--neural-text-muted: #A0A0B0;
```

### Component Patterns
- Cards use `neural-surface` with subtle gold borders on hover
- Primary actions use `neural-gold` with dark text
- Semantic search results have gold accent indicators
- Embedding progress uses animated gold gradient

---

## ğŸ“¡ Tauri IPC Commands

### Search Commands
```rust
#[tauri::command]
async fn search_files(query: String, filters: SearchFilters) -> Result<Vec<SearchResult>>

#[tauri::command]
async fn semantic_search(query: String, limit: usize) -> Result<Vec<SemanticResult>>
```

### Indexing Commands
```rust
#[tauri::command]
async fn start_indexing(paths: Vec<String>) -> Result<IndexingStatus>

#[tauri::command]
async fn get_indexing_status() -> Result<IndexingStatus>

#[tauri::command]
async fn generate_embeddings(file_ids: Vec<String>) -> Result<EmbeddingStatus>
```

### File Commands
```rust
#[tauri::command]
async fn get_file_details(file_id: String) -> Result<FileDetails>

#[tauri::command]
async fn open_file_in_default_app(path: String) -> Result<()>

#[tauri::command]
async fn get_file_preview(file_id: String) -> Result<FilePreview>
```

---

## ğŸš§ Current Implementation Status

### âœ… Complete (Phases 0-2)
- Core file indexing and scanning
- SQLite database with FTS5
- Keyword search with filters
- Semantic search with embeddings
- Preview panel with syntax highlighting
- Sidebar navigation and stats
- Onboarding wizard
- Neural Gold design system

### ğŸ”„ In Progress (Phase 3 ~60%)
- [ ] Smart Collections Engine
- [ ] Collection Templates
- [ ] Command Palette (Cmd+P)
- [ ] Duplicate Detection UI
- [ ] Cleanup Analyzer
- [ ] Bulk Operations
- [ ] Export/Backup
- [ ] **VS Code Claude Export** â† NEW

### â³ Pending (Phases 4-5)
- Testing & Polish
- Launch Preparation

---

## ğŸ”— Integration Points

### Forge Ecosystem
Cortex is designed to integrate with the Forge ecosystem:

```
Cortex (Local) â”€â”€exportâ”€â”€â–¶ Rake (Pipeline) â”€â”€storeâ”€â”€â–¶ DataForge (Cloud)
                              â”‚
                              â–¼
                      Forge Command (Analytics)
```

### Export Formats
1. **VS Code Claude Context** â€” Development acceleration
2. **Rake Package** â€” Cloud knowledge base sync

---

## ğŸ“š Code Patterns

### Tauri Command Pattern
```rust
#[tauri::command]
pub async fn command_name(
    param: ParamType,
    state: State<'_, AppState>,
) -> Result<ReturnType, String> {
    // Implementation
    state.db.operation().await.map_err(|e| e.to_string())
}
```

### Svelte Component Pattern
```svelte
<script lang="ts">
  import { invoke } from '@tauri-apps/api/tauri';
  import { onMount } from 'svelte';
  
  export let prop: PropType;
  
  let state = initialState;
  
  onMount(async () => {
    state = await invoke('command_name', { param });
  });
</script>

<div class="neural-card">
  <!-- Template -->
</div>

<style>
  /* Component-specific styles */
</style>
```

### Store Pattern
```typescript
import { writable, derived } from 'svelte/store';

export const searchQuery = writable('');
export const searchResults = writable<SearchResult[]>([]);

export const filteredResults = derived(
  [searchResults, activeFilters],
  ([$results, $filters]) => applyFilters($results, $filters)
);
```

---

## ğŸ¯ Key Differentiators

1. **Dual Search Modes** â€” Keyword AND semantic in one interface
2. **Local-First** â€” All data stays on your machine
3. **Smart Collections** â€” Dynamic, rule-based file grouping
4. **AI Export** â€” Generate context for AI development tools
5. **Forge Integration** â€” Sync to cloud knowledge base

---

*This context file was generated by Cortex to accelerate AI-assisted development.*
